"use strict";exports.id=802,exports.ids=[802],exports.modules={36506:(e,t,a)=>{a.d(t,{A:()=>n});var s=a(45512),r=a(86235);function n(){return(0,s.jsx)(r.A,{className:"animate-spin"})}},91224:(e,t,a)=>{a.d(t,{A:()=>P});var s=a(45512),r=a(87021),n=a(71965),i=a(61392),d=a(45723),o=a(45082),l=a(66315),c=a(6868),m=a(81914),u=a(61366),p=a(13490),f=a(59462),x=a(89293),h=a(95135),g=a(58009),y=a(74211);let b=g.forwardRef(({className:e,children:t,...a},r)=>(0,s.jsxs)(y.bL,{ref:r,className:(0,f.cn)("relative overflow-hidden",e),...a,children:[(0,s.jsx)(y.LM,{className:"h-full w-full rounded-[inherit]",children:t}),(0,s.jsx)(v,{}),(0,s.jsx)(y.OK,{})]}));b.displayName=y.bL.displayName;let v=g.forwardRef(({className:e,orientation:t="vertical",...a},r)=>(0,s.jsx)(y.VM,{ref:r,orientation:t,className:(0,f.cn)("flex touch-none select-none transition-colors","vertical"===t&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===t&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...a,children:(0,s.jsx)(y.lr,{className:"relative flex-1 rounded-full bg-border"})}));v.displayName=y.VM.displayName;var j=a(26248);let w=(0,j.createServerReference)("40a6ac3dd3143471924c4b862adf49ee4300474bd9",j.callServer,void 0,j.findSourceMapURL,"UpdateBookAppointment"),N=(0,j.createServerReference)("4042cb9ba4b3a224df852223e219b979883d8147b7",j.callServer,void 0,j.findSourceMapURL,"BookAppointment");var _=a(47087),A=a(22403),D=a(36506);function P({patientId:e,appointmentId:t,appointmentDateTime:a,isEdit:y=!1,emitter:j,data:P}){let[C,I]=(0,g.useState)(!1),[M,R]=(0,g.useTransition)(),k=l.Ik({patientId:l.Yj(),appointmentDate:l.p6({required_error:"Date and time must be selected"})}),S=(0,c.mN)({resolver:(0,m.u)(k),mode:"onBlur",defaultValues:{patientId:e,appointmentDate:new Date(a||new Date)}});function B(e,t){let a=new Date(S.getValues("appointmentDate")||new Date);if("hour"===e){let e=parseInt(t,10);a.setHours(a.getHours()>=12?e+12:e)}else if("minute"===e)a.setMinutes(parseInt(t,10));else if("ampm"===e){let e=a.getHours();"AM"===t&&e>=12?a.setHours(e-12):"PM"===t&&e<12&&a.setHours(e+12)}S.setValue("appointmentDate",a)}return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)(n.lG,{open:C,onOpenChange:e=>{S.reset(),I(e)},children:[(0,s.jsx)(n.zM,{asChild:!0,children:(0,s.jsxs)("button",{onClick:()=>I(!0),children:[!y&&(0,s.jsx)(i.A,{className:"stroke-teal-700"}),y&&(0,s.jsx)(i.A,{className:"stroke-customPrimary"})]})}),(0,s.jsxs)(n.Cf,{"aria-describedby":"",className:"sm:max-w-md",children:[(0,s.jsx)(n.c7,{children:(0,s.jsxs)(n.L3,{children:[y?"Update":"Book"," Appointment"]})}),(0,s.jsx)("div",{className:"flex items-center space-x-2",children:(0,s.jsx)(o.A,{isCompact:!0,isEdit:!1,isNote:!1,data:P})}),(0,s.jsx)("div",{children:(0,s.jsx)(u.lV,{...S,children:(0,s.jsxs)("form",{onSubmit:S.handleSubmit(function(e){console.log(e),y?R(async()=>{let a=await (0,_.O)(),s=await w(Object.assign(e,{createdBy:a.data?.id||"",updatedBy:a.data?.id||"",appointmentId:t||""}));s.status?(A.oR.success(s.message),I(!1),j&&j()):A.oR.error(s.message)}):R(async()=>{let t=await (0,_.O)(),a=await N(Object.assign(e,{createdBy:t.data?.id||"",updatedBy:t.data?.id||""}));a.status?(A.oR.success(a.message),I(!1)):A.oR.error(a.message)})}),className:"",children:[(0,s.jsx)(u.zB,{control:S.control,name:"appointmentDate",render:({field:e})=>(0,s.jsxs)(u.eI,{className:"flex flex-col",children:[(0,s.jsx)(u.lR,{children:"Appointment Date"}),(0,s.jsxs)(p.AM,{children:[(0,s.jsx)(p.Wv,{asChild:!0,children:(0,s.jsx)(u.MJ,{children:(0,s.jsxs)(r.$,{variant:"outline",className:(0,f.cn)("pl-3 text-left font-normal border border-tertiary",!e.value&&"text-muted-foreground"),children:[e.value?(0,x.GP)(e.value,"PPP hh:mm aa"):(0,s.jsx)("span",{children:"Pick a Date & Time"}),(0,s.jsx)(d.A,{className:"ml-auto h-4 w-4 opacity-50"})]})})}),(0,s.jsx)(p.hl,{className:"bg-white rounded-md shadow",children:(0,s.jsxs)("div",{className:"sm:flex",children:[(0,s.jsx)(h.V,{className:"",mode:"single",selected:e.value,onSelect:e.onChange,disabled:e=>e<new Date(new Date().getFullYear(),new Date().getMonth(),new Date().getDate()),initialFocus:!0}),(0,s.jsxs)("div",{className:"flex flex-col sm:flex-row sm:h-[300px] divide-y sm:divide-y-0 sm:divide-x",children:[(0,s.jsxs)(b,{className:"w-64 sm:w-auto",children:[(0,s.jsx)("div",{className:"flex sm:flex-col p-2",children:Array.from({length:12},(e,t)=>t+1).map(t=>(0,s.jsx)(r.$,{size:"icon",variant:e.value&&e.value.getHours()%12==t%12?void 0:"ghost",className:`sm:w-full shrink-0 aspect-square  ${e.value.getHours()%12==t%12?"bg-customPrimary text-white hover:bg-customPrimary ":"ghost"}`,type:"button",onClick:()=>B("hour",t.toString()),children:t},t))}),(0,s.jsx)(v,{orientation:"horizontal",className:"sm:hidden"})]}),(0,s.jsxs)(b,{className:"w-64 sm:w-auto",children:[(0,s.jsx)("div",{className:"flex sm:flex-col p-2",children:Array.from({length:12},(e,t)=>5*t).map(t=>(0,s.jsx)(r.$,{size:"icon",variant:e.value&&e.value.getMinutes()===t?void 0:"ghost",className:`sm:w-full shrink-0 aspect-square  ${e.value.getMinutes()===t?"bg-customPrimary text-white hover:bg-customPrimary ":"ghost"}`,type:"button",onClick:()=>B("minute",t.toString()),children:t.toString().padStart(2,"0")},t))}),(0,s.jsx)(v,{orientation:"horizontal",className:"sm:hidden"})]}),(0,s.jsx)(b,{className:"",children:(0,s.jsx)("div",{className:"flex sm:flex-col p-2",children:["AM","PM"].map(t=>(0,s.jsx)(r.$,{size:"icon",variant:e.value&&("AM"===t&&12>e.value.getHours()||"PM"===t&&e.value.getHours()>=12)?void 0:"ghost",className:`sm:w-full shrink-0 aspect-square  ${"AM"===t&&12>e.value.getHours()||"PM"===t&&e.value.getHours()>=12?"bg-customPrimary text-white hover:bg-customPrimary ":"ghost"}`,type:"button",onClick:()=>B("ampm",t),children:t},t))})})]})]})})]}),(0,s.jsx)(u.Rr,{}),(0,s.jsx)(u.C5,{})]})}),(0,s.jsxs)(n.Es,{className:"justify-end",children:[(0,s.jsx)(n.HM,{asChild:!0,children:(0,s.jsx)(r.$,{className:"bg-red-500 text-white hover:bg-red-600 hover:text-white px-6",type:"button",size:"sm",onClick:()=>I(!1),children:"Close"})}),(0,s.jsxs)(r.$,{className:"bg-customPrimary hover:bg-customPrimary-80 disabled:bg-customPrimary-20 px-6",type:"submit",size:"sm",disabled:!S.formState.isValid,children:["Confirm",M&&(0,s.jsx)(D.A,{})]})]})]})})})]})]})})}},95135:(e,t,a)=>{a.d(t,{V:()=>l});var s=a(45512);a(58009);var r=a(52706),n=a(99905),i=a(63189),d=a(59462),o=a(87021);function l({className:e,classNames:t,showOutsideDays:a=!0,...l}){return(0,s.jsx)(i.hv,{showOutsideDays:a,className:(0,d.cn)("p-3",e),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:(0,d.cn)((0,o.r)({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:(0,d.cn)((0,o.r)({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-customPrimary text-white hover:bg-customPrimary hover:text-white focus:bg-customPrimary focus:text-white",day_today:"bg-customPrimary-20 text-customBlack",day_outside:"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...t},components:{IconLeft:({className:e,...t})=>(0,s.jsx)(r.A,{className:(0,d.cn)("h-4 w-4",e),...t}),IconRight:({className:e,...t})=>(0,s.jsx)(n.A,{className:(0,d.cn)("h-4 w-4",e),...t})},...l})}l.displayName="Calendar"},71965:(e,t,a)=>{a.d(t,{Cf:()=>p,Es:()=>x,HM:()=>m,L3:()=>h,c7:()=>f,lG:()=>o,zM:()=>l});var s=a(45512),r=a(58009),n=a(27553),i=a(44269),d=a(59462);let o=n.bL,l=n.l9,c=n.ZL,m=n.bm,u=r.forwardRef(({className:e,...t},a)=>(0,s.jsx)(n.hJ,{ref:a,className:(0,d.cn)("fixed inset-0 z-50 bg-black/25  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));u.displayName=n.hJ.displayName;let p=r.forwardRef(({className:e,children:t,...a},r)=>(0,s.jsxs)(c,{children:[(0,s.jsx)(u,{}),(0,s.jsxs)(n.UC,{ref:r,className:(0,d.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...a,children:[t,(0,s.jsxs)(n.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(i.A,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));p.displayName=n.UC.displayName;let f=({className:e,...t})=>(0,s.jsx)("div",{className:(0,d.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});f.displayName="DialogHeader";let x=({className:e,...t})=>(0,s.jsx)("div",{className:(0,d.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});x.displayName="DialogFooter";let h=r.forwardRef(({className:e,...t},a)=>(0,s.jsx)(n.hE,{ref:a,className:(0,d.cn)("text-lg font-semibold leading-none tracking-tight",e),...t}));h.displayName=n.hE.displayName,r.forwardRef(({className:e,...t},a)=>(0,s.jsx)(n.VY,{ref:a,className:(0,d.cn)("text-sm text-muted-foreground",e),...t})).displayName=n.VY.displayName},61366:(e,t,a)=>{a.d(t,{lV:()=>m,MJ:()=>y,Rr:()=>b,zB:()=>p,eI:()=>h,lR:()=>g,C5:()=>v});var s=a(45512),r=a(58009),n=a(12705),i=a(6868),d=a(59462),o=a(92405);let l=(0,a(21643).F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=r.forwardRef(({className:e,...t},a)=>(0,s.jsx)(o.b,{ref:a,className:(0,d.cn)(l(),e),...t}));c.displayName=o.b.displayName;let m=i.Op,u=r.createContext({}),p=({...e})=>(0,s.jsx)(u.Provider,{value:{name:e.name},children:(0,s.jsx)(i.xI,{...e})}),f=()=>{let e=r.useContext(u),t=r.useContext(x),{getFieldState:a,formState:s}=(0,i.xW)(),n=a(e.name,s);if(!e)throw Error("useFormField should be used within <FormField>");let{id:d}=t;return{id:d,name:e.name,formItemId:`${d}-form-item`,formDescriptionId:`${d}-form-item-description`,formMessageId:`${d}-form-item-message`,...n}},x=r.createContext({}),h=r.forwardRef(({className:e,...t},a)=>{let n=r.useId();return(0,s.jsx)(x.Provider,{value:{id:n},children:(0,s.jsx)("div",{ref:a,className:(0,d.cn)("space-y-2",e),...t})})});h.displayName="FormItem";let g=r.forwardRef(({className:e,...t},a)=>{let{error:r,formItemId:n}=f();return(0,s.jsx)(c,{ref:a,className:(0,d.cn)(r&&"text-destructive",e),htmlFor:n,...t})});g.displayName="FormLabel";let y=r.forwardRef(({...e},t)=>{let{error:a,formItemId:r,formDescriptionId:i,formMessageId:d}=f();return(0,s.jsx)(n.DX,{ref:t,id:r,"aria-describedby":a?`${i} ${d}`:`${i}`,"aria-invalid":!!a,...e})});y.displayName="FormControl";let b=r.forwardRef(({className:e,...t},a)=>{let{formDescriptionId:r}=f();return(0,s.jsx)("p",{ref:a,id:r,className:(0,d.cn)("text-sm text-muted-foreground",e),...t})});b.displayName="FormDescription";let v=r.forwardRef(({className:e,children:t,...a},r)=>{let{error:n,formMessageId:i}=f(),o=n?String(n?.message):t;return o?(0,s.jsx)("p",{ref:r,id:i,className:(0,d.cn)("text-sm font-medium text-destructive",e),...a,children:o}):null});v.displayName="FormMessage"},56773:(e,t,a)=>{a.d(t,{Lh:()=>c,TR:()=>f,fQ:()=>p,iZ:()=>m});var s=a(21590);a(70376);var r=a(89121),n=a(44867),i=a(82190),d=a(7351),o=a(99344);let l=d.Ik({patientId:d.Yj(),appointmentDate:d.p6({required_error:"Date and time must be selected"}),createdBy:d.Yj().min(3,{message:"createdBy required"}),updatedBy:d.Yj().min(3,{message:"updatedBy required"})});async function c(e){let t=l.safeParse(e);if(!t.success)return{message:"Validation failed",error:t.error.format(),status:!1};try{return await r.z.$transaction(async t=>{let a=await t.patientAppointment.findFirst({where:{AND:[{patient_id:e.patientId},{appointment_status:"Pending"},{appointment_date_time:{gte:(0,n.o)(e.appointmentDate),lt:(0,i.D)(e.appointmentDate)}}]},select:{id:!0}});if(a)return{message:"Appointment Already booked on this Date",data:a,status:!0};{let a=await t.patientAppointment.create({data:{patient_id:e.patientId,appointment_date_time:e.appointmentDate,appointment_status:"Pending",created_user_id:e.createdBy,updated_user_id:e.updatedBy}});return{message:"Appointment booked Successfully",data:a,status:!0}}})}catch(e){return{message:"something went wrong",error:e,status:!1}}}async function m(e){let t=l.safeParse(e);if(!t.success)return{message:"Validation failed",error:t.error.format(),status:!1};try{let t=await r.z.patientAppointment.update({data:{patient_id:e.patientId,appointment_date_time:e.appointmentDate,created_user_id:e.createdBy,updated_user_id:e.updatedBy},where:{id:e.appointmentId}});return{message:"Updated Appointment Successfully",data:t,status:!0}}catch(e){return{message:"something went wrong",error:e,status:!1}}}l.merge(d.Ik({appointmentId:d.Yj().uuid({message:"id must required"})}));let u=d.Ik({appointmentId:d.Yj().uuid({message:"id must required"}),updatedBy:d.Yj().min(3,{message:"updatedBy required"})});async function p(e){let t=u.safeParse(e);if(!t.success)return{message:"Validation failed",error:t.error.format(),status:!1};try{let t=await r.z.patientAppointment.update({data:{appointment_status:"Canceled",updated_user_id:e.updatedBy},where:{id:e.appointmentId}});return{message:"Canceled Appointment Successfully",data:t,status:!0}}catch(e){return{message:"something went wrong",error:e,status:!1}}}async function f(e){try{let t=await r.z.patientAppointment.findMany({where:{appointment_date_time:{gte:(0,n.o)(e),lt:(0,i.D)(e)},appointment_status:"Pending"},include:{patient_appointment:!0}});return{message:"Fetch Appointment Successfully",data:t,status:!0}}catch(e){return{message:"something went wrong",error:e,status:!1}}}(0,o.D)([c,m,p,f]),(0,s.A)(c,"4042cb9ba4b3a224df852223e219b979883d8147b7",null),(0,s.A)(m,"40a6ac3dd3143471924c4b862adf49ee4300474bd9",null),(0,s.A)(p,"407b989830a4ea07a7eeff31cc0150f8e982964ccb",null),(0,s.A)(f,"404e950d79f8b8b24e0aac835b5c7797ab7483add1",null)},47087:(e,t,a)=>{a.d(t,{O:()=>r});var s=a(26248);let r=(0,s.createServerReference)("00281bb400ea6e7cba84e747e5ada05bc3b2b25669",s.callServer,void 0,s.findSourceMapURL,"GetUser")}};