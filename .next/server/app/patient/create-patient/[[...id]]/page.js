(()=>{var e={};e.id=125,e.ids=[125],e.modules={60030:e=>{"use strict";e.exports=require("@prisma/client/edge")},60483:e=>{"use strict";e.exports=require("@prisma/client/scripts/default-index.js")},5486:e=>{"use strict";e.exports=require("bcrypt")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},79551:e=>{"use strict";e.exports=require("url")},44708:e=>{"use strict";e.exports=require("node:https")},97875:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>l,routeModule:()=>m,tree:()=>o});var s=a(70260),r=a(28203),i=a(25155),n=a.n(i),d=a(67292),c={};for(let e in d)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>d[e]);a.d(t,c);let o=["",{children:["patient",{children:["create-patient",{children:["[[...id]]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,98229)),"/Users/muhamnadwaris/Desktop/projects/clinic-ms/app/patient/create-patient/[[...id]]/page.tsx"]}]},{}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(a.bind(a,19611)),"/Users/muhamnadwaris/Desktop/projects/clinic-ms/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(a.t.bind(a,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(a.t.bind(a,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(a.bind(a,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],l=["/Users/muhamnadwaris/Desktop/projects/clinic-ms/app/patient/create-patient/[[...id]]/page.tsx"],u={require:a,loadChunk:()=>Promise.resolve()},m=new s.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/patient/create-patient/[[...id]]/page",pathname:"/patient/create-patient/[[...id]]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},83227:(e,t,a)=>{"use strict";a.r(t),a.d(t,{"000366f20132cd282aacebd06ae7bcb752d9a8480d":()=>s.f,"000c0522219a527598e3eeebfe0e256b75c62968fb":()=>r.fZ,"00d7d9908c28d47eeb318c7655099bb79332cbf5de":()=>r.Mi,"405d35bc8bcfe2081206c4db459097298fe323f5a4":()=>r.Rw,"4075a697b8d174c57378138784911344171f244c1d":()=>r.Lp,"408377f98a9bd176429242396b35519fe8a25a7edf":()=>r.Zj,"40e9545a480c5f1f0c9049e8cd09e27e297d400a79":()=>r.Ob,"7021018dfb49a4bd18304bfa82c430eb7f25d67ca8":()=>r._H});var s=a(84890),r=a(99935)},67811:(e,t,a)=>{Promise.resolve().then(a.bind(a,98229))},81883:(e,t,a)=>{Promise.resolve().then(a.bind(a,93413))},36506:(e,t,a)=>{"use strict";a.d(t,{A:()=>i});var s=a(45512),r=a(86235);function i(){return(0,s.jsx)(r.A,{className:"animate-spin"})}},143:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});var s=a(45512);function r({title:e}){return(0,s.jsx)("header",{className:"bg-customPrimary-20 font-semibold py-2 px-8 rounded-md shadow-sm mt-8",children:e??"title"})}},93413:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>N});var s=a(45512),r=a(36506),i=a(143),n=a(87021),d=a(61366),c=a(25409),o=a(48859),l=a(26248);let u=(0,l.createServerReference)("4075a697b8d174c57378138784911344171f244c1d",l.callServer,void 0,l.findSourceMapURL,"UpdatePatient"),m=(0,l.createServerReference)("405d35bc8bcfe2081206c4db459097298fe323f5a4",l.callServer,void 0,l.findSourceMapURL,"AddPatient");a(31532);var p=a(47087),f=a(81914),x=a(79334),h=a(58009),b=a(6868),g=a(22403),j=a(66315),y=a(24865);function N(){let e;let[t,a]=(0,h.useTransition)(),[l,N]=(0,h.useState)({id:"",status:!1}),{id:v}=(0,x.useParams)();v&&(e=v[0]);let _=j.Ik({patientName:j.Yj().min(1,{message:"Patient Name is Required"}),fatherName:j.Yj(),age:j.KC([j.Yj().min(1,{message:"Age is Required"}),j.ai().int().nonnegative({message:"Age must be a positive number"})]).transform((e,t)=>{if("string"==typeof e){if(!Number.isNaN(parseInt(e)))return parseInt(e);t.addIssue({code:y.eq.custom,message:"Not a valid number"})}return e}),cnic:j.Yj().max(13,{message:"Max 13 digits"}),phone:j.Yj().min(11,{message:"Max 11 digits"}).max(15,{message:"Max 15 digits"}).superRefine((e,t)=>{""!=e&&Number.isNaN(parseInt(e))&&t.addIssue({code:y.eq.custom,message:"Not a Number"})}),sideNote:j.Yj()}).partial({fatherName:!0,cnic:!0,sideNote:!0}),w=(0,b.mN)({resolver:(0,f.u)(_),mode:"onBlur",defaultValues:{patientName:"",fatherName:"",cnic:"",phone:"",sideNote:"",age:""}});async function P(t){console.log(t);let s=await (0,p.O)();e?a(async()=>{let a=await u(Object.assign(t,{createdBy:s.data?.id,updatedBy:s.data?.id,id:e}));a.status?(g.Ay.success(a.message),(0,x.redirect)("/patient/patient-list")):g.Ay.error(a.message)}):a(async()=>{let e=await m(Object.assign(t,{createdBy:s.data?.id,updatedBy:s.data?.id}));e.status?(g.Ay.success(e.message),(0,x.redirect)(`/patient/patient-checkup/${e.data.id}`)):(g.Ay.error(e.message),"Phone No already Exist."===e.message&&N({id:e.data?.id,status:!0}))})}return(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("section",{children:[(0,s.jsx)(i.A,{title:`${void 0==e?"Add":"Update"} Patient`}),(0,s.jsx)("div",{className:"flex items-center justify-center w-full mt-8 ",children:(0,s.jsx)(b.Op,{...w,children:(0,s.jsxs)("form",{onSubmit:w.handleSubmit(P),autoComplete:"off",className:"bg-customSecondary-20 rounded-md shadow p-8 w-full space-y-4",children:[(0,s.jsx)(d.zB,{control:w.control,name:"patientName",render:({field:e})=>(0,s.jsxs)(d.eI,{className:"flex items-center",children:[(0,s.jsxs)(d.lR,{className:"basis-[30%]",children:["Patient Name",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsxs)("div",{className:"basis-[70%]",children:[(0,s.jsx)(d.MJ,{children:(0,s.jsx)(c.p,{placeholder:"Write Patient Name",...e,type:"text"})}),(0,s.jsx)(d.Rr,{}),(0,s.jsx)(d.C5,{})]})]})}),(0,s.jsx)(d.zB,{control:w.control,name:"fatherName",render:({field:e})=>(0,s.jsxs)(d.eI,{className:"flex items-center",children:[(0,s.jsx)(d.lR,{className:"basis-[30%]",children:"Father Name"}),(0,s.jsxs)("div",{className:"basis-[70%]",children:[(0,s.jsx)(d.MJ,{children:(0,s.jsx)(c.p,{placeholder:"Write Father Name (Optional)",...e,type:"text"})}),(0,s.jsx)(d.Rr,{}),(0,s.jsx)(d.C5,{})]})]})}),(0,s.jsx)(d.zB,{control:w.control,name:"age",render:({field:e})=>(0,s.jsxs)(d.eI,{className:"flex items-center",children:[(0,s.jsxs)(d.lR,{className:"basis-[30%]",children:["Age ",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsxs)("div",{className:"basis-[70%]",children:[(0,s.jsx)(d.MJ,{children:(0,s.jsx)(c.p,{placeholder:"Write Age",...e,type:"number"})}),(0,s.jsx)(d.Rr,{}),(0,s.jsx)(d.C5,{})]})]})}),(0,s.jsx)(d.zB,{control:w.control,name:"cnic",render:({field:e})=>(0,s.jsxs)(d.eI,{className:"flex items-center",children:[(0,s.jsx)(d.lR,{className:"basis-[30%]",children:"CNIC"}),(0,s.jsxs)("div",{className:"basis-[70%]",children:[(0,s.jsx)(d.MJ,{children:(0,s.jsx)(c.p,{placeholder:"Write CNIC Example 3422127522717 (Optional)",...e,type:"number"})}),(0,s.jsx)(d.Rr,{}),(0,s.jsx)(d.C5,{})]})]})}),(0,s.jsx)(d.zB,{control:w.control,name:"phone",render:({field:e})=>(0,s.jsxs)(d.eI,{className:"flex items-center",children:[(0,s.jsxs)(d.lR,{className:"basis-[30%]",children:["Phone No.",(0,s.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,s.jsxs)("div",{className:"basis-[70%]",children:[(0,s.jsx)(d.MJ,{children:(0,s.jsx)(c.p,{placeholder:"Write Phone Number",...e,type:"text"})}),(0,s.jsx)(d.Rr,{}),(0,s.jsx)(d.C5,{})]})]})}),(0,s.jsx)(d.zB,{control:w.control,name:"sideNote",render:({field:e})=>(0,s.jsxs)(d.eI,{className:"flex items-center",children:[(0,s.jsx)(d.lR,{className:"basis-[30%]",children:"Notes"}),(0,s.jsxs)("div",{className:"basis-[70%]",children:[(0,s.jsx)(d.MJ,{children:(0,s.jsx)(o.T,{placeholder:"Write any remarks regarding to identify this patient (Optional)",...e})}),(0,s.jsx)(d.Rr,{}),(0,s.jsx)(d.C5,{})]})]})}),(0,s.jsxs)("div",{className:"w-full flex gap-x-4 justify-end ",children:[l.status&&(0,s.jsx)(n.$,{className:"bg-customPrimary text-white hover:bg-customPrimary hover:text-white px-12",type:"button",onClick:()=>{(0,x.redirect)(`/patient/patient-checkup/${l.id}`)},children:"Are you Sure to Continue?"}),(0,s.jsx)(n.$,{className:"bg-red-500 text-white hover:bg-red-600 hover:text-white px-12",type:"button",onClick:()=>{w.reset(),N({id:"",status:!1})},children:"Reset"}),(0,s.jsxs)(n.$,{className:"bg-customPrimary hover:bg-customPrimary-80 disabled:bg-customPrimary-20 px-12",type:"submit",disabled:!w.formState.isValid,children:[void 0==e?"Add":"Update",t&&(0,s.jsx)(r.A,{})]})]})]})})})]})})}},61366:(e,t,a)=>{"use strict";a.d(t,{lV:()=>u,MJ:()=>g,Rr:()=>j,zB:()=>p,eI:()=>h,lR:()=>b,C5:()=>y});var s=a(45512),r=a(58009),i=a(12705),n=a(6868),d=a(59462),c=a(92405);let o=(0,a(21643).F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),l=r.forwardRef(({className:e,...t},a)=>(0,s.jsx)(c.b,{ref:a,className:(0,d.cn)(o(),e),...t}));l.displayName=c.b.displayName;let u=n.Op,m=r.createContext({}),p=({...e})=>(0,s.jsx)(m.Provider,{value:{name:e.name},children:(0,s.jsx)(n.xI,{...e})}),f=()=>{let e=r.useContext(m),t=r.useContext(x),{getFieldState:a,formState:s}=(0,n.xW)(),i=a(e.name,s);if(!e)throw Error("useFormField should be used within <FormField>");let{id:d}=t;return{id:d,name:e.name,formItemId:`${d}-form-item`,formDescriptionId:`${d}-form-item-description`,formMessageId:`${d}-form-item-message`,...i}},x=r.createContext({}),h=r.forwardRef(({className:e,...t},a)=>{let i=r.useId();return(0,s.jsx)(x.Provider,{value:{id:i},children:(0,s.jsx)("div",{ref:a,className:(0,d.cn)("space-y-2",e),...t})})});h.displayName="FormItem";let b=r.forwardRef(({className:e,...t},a)=>{let{error:r,formItemId:i}=f();return(0,s.jsx)(l,{ref:a,className:(0,d.cn)(r&&"text-destructive",e),htmlFor:i,...t})});b.displayName="FormLabel";let g=r.forwardRef(({...e},t)=>{let{error:a,formItemId:r,formDescriptionId:n,formMessageId:d}=f();return(0,s.jsx)(i.DX,{ref:t,id:r,"aria-describedby":a?`${n} ${d}`:`${n}`,"aria-invalid":!!a,...e})});g.displayName="FormControl";let j=r.forwardRef(({className:e,...t},a)=>{let{formDescriptionId:r}=f();return(0,s.jsx)("p",{ref:a,id:r,className:(0,d.cn)("text-sm text-muted-foreground",e),...t})});j.displayName="FormDescription";let y=r.forwardRef(({className:e,children:t,...a},r)=>{let{error:i,formMessageId:n}=f(),c=i?String(i?.message):t;return c?(0,s.jsx)("p",{ref:r,id:n,className:(0,d.cn)("text-sm font-medium text-destructive",e),...a,children:c}):null});y.displayName="FormMessage"},48859:(e,t,a)=>{"use strict";a.d(t,{T:()=>n});var s=a(45512),r=a(58009),i=a(59462);let n=r.forwardRef(({className:e,...t},a)=>(0,s.jsx)("textarea",{className:(0,i.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:border-tertiary disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:a,...t}));n.displayName="Textarea"},98229:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});let s=(0,a(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/muhamnadwaris/Desktop/projects/clinic-ms/app/patient/create-patient/[[...id]]/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/muhamnadwaris/Desktop/projects/clinic-ms/app/patient/create-patient/[[...id]]/page.tsx","default")},99935:(e,t,a)=>{"use strict";a.d(t,{Lp:()=>l,Mi:()=>x,Ob:()=>p,Rw:()=>o,Zj:()=>f,_H:()=>u,fZ:()=>m});var s=a(21590);a(70376);var r=a(7351),i=a(64998),n=a(89121),d=a(99344);let c=r.Ik({patientName:r.Yj().min(1,{message:"Patient Name is Required"}),fatherName:r.Yj(),age:r.KC([r.Yj().min(1,{message:"Age is Required"}),r.ai().int().nonnegative({message:"Age must be a positive number"})]).transform((e,t)=>{if("string"==typeof e){if(!Number.isNaN(parseInt(e)))return parseInt(e);t.addIssue({code:i.eq.custom,message:"Not a valid number"})}return e}),cnic:r.Yj().max(13,{message:"Max 13 digits"}),phone:r.Yj().min(11,{message:"Max 11 digits"}).max(15,{message:"Max 15 digits"}).superRefine((e,t)=>{""!=e&&Number.isNaN(parseInt(e))&&t.addIssue({code:i.eq.custom,message:"Not a Number"})}),sideNote:r.Yj(),createdBy:r.Yj().optional(),updatedBy:r.Yj().optional()}).partial({fatherName:!0,cnic:!0,sideNote:!0});async function o({patientName:e,fatherName:t,age:a,phone:s,cnic:r,sideNote:i,createdBy:d="",updatedBy:o=""}){let l=c.safeParse({patientName:e,fatherName:t,age:a,phone:s,cnic:r,sideNote:i});if(!l.success)return{message:"Validation failed",error:l.error.format()};try{return await n.z.$transaction(async n=>{let c=await n.patient.create({data:{patient_name:e,father_name:t,age:Number(a),phone_no:s,cnic:r,notes:i,created_user_id:d,updated_user_id:o},select:{id:!0,updated_at:!0,updated_by:!0}});return{message:"Patient Data Created Successfully",data:c,status:!0}})}catch(e){return{message:"Something Went Wrong",error:e,status:!1}}}async function l({id:e,patientName:t,fatherName:a,age:s,phone:r,cnic:i,sideNote:d,createdBy:o="",updatedBy:l=""}){let u=c.safeParse({patientName:t,fatherName:a,age:s,phone:r,cnic:i,sideNote:d});if(!u.success)return{message:"Validation failed",error:u.error.format()};try{let c=await n.z.patient.update({data:{patient_name:t,father_name:a,age:Number(s),phone_no:r,cnic:i,notes:d,created_user_id:o,updated_user_id:l},select:{id:!0,updated_at:!0,updated_by:!0},where:{id:e}});return{message:"Patient Data Updated Successfully",data:c,status:!0}}catch(e){return{message:"Something Went Wrong",error:e,status:!1}}}async function u(e,t,a){try{let s=await n.z.patient.findMany({omit:{created_at:!0,created_user_id:!0,updated_at:!0,updated_user_id:!0},skip:e,take:t,where:""!=a?{OR:[{patient_name:{contains:a}},{father_name:{contains:a}},{cnic:{contains:a}},{phone_no:{contains:a}},{notes:{contains:a}}]}:void 0}),r=await n.z.patient.count();return{message:"Fetch Patient Data successfully",data:s,status:!0,totalItems:r}}catch(e){return{message:"Something Went Wrong",error:e,status:!1}}}async function m(){try{let e=await n.z.patient.findMany({omit:{created_at:!0,created_user_id:!0,updated_at:!0,updated_user_id:!0}});return{message:"Fetch Patient Data successfully",data:e,status:!0}}catch(e){return{message:"Something Went Wrong",error:e,status:!1}}}async function p(e){try{let t=await n.z.patient.findUnique({omit:{created_at:!0,created_user_id:!0,updated_at:!0,updated_user_id:!0},where:{id:e},include:{patient_checkup:{include:{created_by:{select:{fname:!0,lname:!0}}},orderBy:{created_at:"desc"}}}});return{message:"Fetch Patient Data successfully",data:t,status:!0}}catch(e){return{message:"Something Went Wrong",error:e,status:!1}}}async function f(e){try{let t=await n.z.patient.delete({where:{id:e},select:{id:!0,updated_at:!0,updated_by:!0}});return{message:"Patient Data Deleted successfully",data:t,status:!0}}catch(e){return{message:"Something Went Wrong",error:e,status:!1}}}async function x(){try{let e=await n.z.patient.count();return{message:"Fetch Patient Count",data:e,status:!0}}catch(e){return{message:"Something went wrong",error:e,status:!1}}}c.merge(r.Ik({id:r.Yj().uuid()})),(0,d.D)([o,l,u,m,p,f,x]),(0,s.A)(o,"405d35bc8bcfe2081206c4db459097298fe323f5a4",null),(0,s.A)(l,"4075a697b8d174c57378138784911344171f244c1d",null),(0,s.A)(u,"7021018dfb49a4bd18304bfa82c430eb7f25d67ca8",null),(0,s.A)(m,"000c0522219a527598e3eeebfe0e256b75c62968fb",null),(0,s.A)(p,"40e9545a480c5f1f0c9049e8cd09e27e297d400a79",null),(0,s.A)(f,"408377f98a9bd176429242396b35519fe8a25a7edf",null),(0,s.A)(x,"00d7d9908c28d47eeb318c7655099bb79332cbf5de",null)},89121:(e,t,a)=>{"use strict";a.d(t,{z:()=>i});var s=a(60030),r=a(18671);let i=globalThis.prisma||new s.PrismaClient().$extends((0,r.WU)())},47087:(e,t,a)=>{"use strict";a.d(t,{O:()=>r});var s=a(26248);let r=(0,s.createServerReference)("00281bb400ea6e7cba84e747e5ada05bc3b2b25669",s.callServer,void 0,s.findSourceMapURL,"GetUser")},31532:(e,t,a)=>{"use strict";a.d(t,{O:()=>r});var s=a(26248);let r=(0,s.createServerReference)("40e9545a480c5f1f0c9049e8cd09e27e297d400a79",s.callServer,void 0,s.findSourceMapURL,"ReadSinglePatient")},46055:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>r});var s=a(88077);let r=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,s.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]}};var t=require("../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[638,156,928,77,546,265,716],()=>a(97875));module.exports=s})();