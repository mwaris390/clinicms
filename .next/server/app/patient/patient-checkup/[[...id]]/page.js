(()=>{var e={};e.id=222,e.ids=[222],e.modules={60030:e=>{"use strict";e.exports=require("@prisma/client/edge")},60483:e=>{"use strict";e.exports=require("@prisma/client/scripts/default-index.js")},5486:e=>{"use strict";e.exports=require("bcrypt")},10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},79551:e=>{"use strict";e.exports=require("url")},44708:e=>{"use strict";e.exports=require("node:https")},49539:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>l.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>o});var a=r(70260),s=r(28203),n=r(25155),l=r.n(n),i=r(67292),d={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);r.d(t,d);let o=["",{children:["patient",{children:["patient-checkup",{children:["[[...id]]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,43208)),"/Users/muhamnadwaris/Desktop/projects/clinic-ms/app/patient/patient-checkup/[[...id]]/page.tsx"]}]},{}]},{}]},{metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,19611)),"/Users/muhamnadwaris/Desktop/projects/clinic-ms/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,46055))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["/Users/muhamnadwaris/Desktop/projects/clinic-ms/app/patient/patient-checkup/[[...id]]/page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:s.RouteKind.APP_PAGE,page:"/patient/patient-checkup/[[...id]]/page",pathname:"/patient/patient-checkup/[[...id]]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},45596:(e,t,r)=>{"use strict";r.r(t),r.d(t,{"000366f20132cd282aacebd06ae7bcb752d9a8480d":()=>a.f,"000c0522219a527598e3eeebfe0e256b75c62968fb":()=>s.fZ,"0029e0a1d8292def1750a489b8854ad98ecb435a26":()=>n.c$,"00d7d9908c28d47eeb318c7655099bb79332cbf5de":()=>s.Mi,"402fc36c25bb3e8fd88e14cea730d3c759512127d3":()=>n.Sh,"405d35bc8bcfe2081206c4db459097298fe323f5a4":()=>s.Rw,"4075a697b8d174c57378138784911344171f244c1d":()=>s.Lp,"4083136e1cf0e91fa0e8a6f6e237eeaa29b983d79f":()=>n.LM,"408377f98a9bd176429242396b35519fe8a25a7edf":()=>s.Zj,"408508b8bfa090d01f4f1ef15e5b0b434bab9cd606":()=>n.y1,"40e9545a480c5f1f0c9049e8cd09e27e297d400a79":()=>s.Ob,"7021018dfb49a4bd18304bfa82c430eb7f25d67ca8":()=>s._H});var a=r(84890),s=r(99935),n=r(66445)},73068:(e,t,r)=>{Promise.resolve().then(r.bind(r,43208))},79148:(e,t,r)=>{Promise.resolve().then(r.bind(r,33452))},36506:(e,t,r)=>{"use strict";r.d(t,{A:()=>n});var a=r(45512),s=r(86235);function n(){return(0,a.jsx)(s.A,{className:"animate-spin"})}},33452:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>eg});var a=r(45512),s=r(36506),n=r(23523),l=r(143),i=r(87021),d=r(58009),o=/[\\\/_+.#"@\[\(\{&]/,c=/[\\\/_+.#"@\[\(\{&]/g,u=/[\s-]/,p=/[\s-]/g;function m(e){return e.toLowerCase().replace(p," ")}var f=r(27553),h=r(30830),x=r(30096),b=r(29952),v='[cmdk-group=""]',g='[cmdk-group-items=""]',j='[cmdk-item=""]',y=`${j}:not([aria-disabled="true"])`,N="cmdk-item-select",w="data-value",_=(e,t,r)=>(function(e,t,r){return function e(t,r,a,s,n,l,i){if(l===r.length)return n===t.length?1:.99;var d=`${n},${l}`;if(void 0!==i[d])return i[d];for(var m,f,h,x,b=s.charAt(l),v=a.indexOf(b,n),g=0;v>=0;)(m=e(t,r,a,s,v+1,l+1,i))>g&&(v===n?m*=1:o.test(t.charAt(v-1))?(m*=.8,(h=t.slice(n,v-1).match(c))&&n>0&&(m*=Math.pow(.999,h.length))):u.test(t.charAt(v-1))?(m*=.9,(x=t.slice(n,v-1).match(p))&&n>0&&(m*=Math.pow(.999,x.length))):(m*=.17,n>0&&(m*=Math.pow(.999,v-n))),t.charAt(v)!==r.charAt(l)&&(m*=.9999)),(m<.1&&a.charAt(v-1)===s.charAt(l+1)||s.charAt(l+1)===s.charAt(l)&&a.charAt(v-1)!==s.charAt(l))&&.1*(f=e(t,r,a,s,v+1,l+2,i))>m&&(m=.1*f),m>g&&(g=m),v=a.indexOf(b,v+1);return i[d]=g,g}(e=r&&r.length>0?`${e+" "+r.join(" ")}`:e,t,m(e),m(t),0,0,{})})(e,t,r),R=d.createContext(void 0),k=()=>d.useContext(R),D=d.createContext(void 0),S=()=>d.useContext(D),C=d.createContext(void 0),A=d.forwardRef((e,t)=>{let r=F(()=>{var t,r;return{search:"",value:null!=(r=null!=(t=e.value)?t:e.defaultValue)?r:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),a=F(()=>new Set),s=F(()=>new Map),n=F(()=>new Map),l=F(()=>new Set),i=U(e),{label:o,children:c,value:u,onValueChange:p,filter:m,shouldFilter:f,loop:b,disablePointerSelection:k=!1,vimBindings:S=!0,...C}=e,A=(0,x.B)(),I=(0,x.B)(),L=(0,x.B)(),E=d.useRef(null),P=W();$(()=>{if(void 0!==u){let e=u.trim();r.current.value=e,M.emit()}},[u]),$(()=>{P(6,J)},[]);let M=d.useMemo(()=>({subscribe:e=>(l.current.add(e),()=>l.current.delete(e)),snapshot:()=>r.current,setState:(e,t,a)=>{var s,n,l,d;if(!Object.is(r.current[e],t)){if(r.current[e]=t,"search"===e)G(),q(),P(1,B);else if("value"===e){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let e=document.getElementById(L);e?e.focus():null==(s=document.getElementById(A))||s.focus()}if(P(7,()=>{var e;r.current.selectedItemId=null==(e=K())?void 0:e.id,M.emit()}),a||P(5,J),(null==(n=i.current)?void 0:n.value)!==void 0){null==(d=(l=i.current).onValueChange)||d.call(l,null!=t?t:"");return}}M.emit()}},emit:()=>{l.current.forEach(e=>e())}}),[]),Y=d.useMemo(()=>({value:(e,t,a)=>{var s;t!==(null==(s=n.current.get(e))?void 0:s.value)&&(n.current.set(e,{value:t,keywords:a}),r.current.filtered.items.set(e,z(t,a)),P(2,()=>{q(),M.emit()}))},item:(e,t)=>(a.current.add(e),t&&(s.current.has(t)?s.current.get(t).add(e):s.current.set(t,new Set([e]))),P(3,()=>{G(),q(),r.current.value||B(),M.emit()}),()=>{n.current.delete(e),a.current.delete(e),r.current.filtered.items.delete(e);let t=K();P(4,()=>{G(),(null==t?void 0:t.getAttribute("id"))===e&&B(),M.emit()})}),group:e=>(s.current.has(e)||s.current.set(e,new Set),()=>{n.current.delete(e),s.current.delete(e)}),filter:()=>i.current.shouldFilter,label:o||e["aria-label"],getDisablePointerSelection:()=>i.current.disablePointerSelection,listId:A,inputId:L,labelId:I,listInnerRef:E}),[]);function z(e,t){var a,s;let n=null!=(s=null==(a=i.current)?void 0:a.filter)?s:_;return e?n(e,r.current.search,t):0}function q(){if(!r.current.search||!1===i.current.shouldFilter)return;let e=r.current.filtered.items,t=[];r.current.filtered.groups.forEach(r=>{let a=s.current.get(r),n=0;a.forEach(t=>{n=Math.max(e.get(t),n)}),t.push([r,n])});let a=E.current;H().sort((t,r)=>{var a,s;let n=t.getAttribute("id"),l=r.getAttribute("id");return(null!=(a=e.get(l))?a:0)-(null!=(s=e.get(n))?s:0)}).forEach(e=>{let t=e.closest(g);t?t.appendChild(e.parentElement===t?e:e.closest(`${g} > *`)):a.appendChild(e.parentElement===a?e:e.closest(`${g} > *`))}),t.sort((e,t)=>t[1]-e[1]).forEach(e=>{var t;let r=null==(t=E.current)?void 0:t.querySelector(`${v}[${w}="${encodeURIComponent(e[0])}"]`);null==r||r.parentElement.appendChild(r)})}function B(){let e=H().find(e=>"true"!==e.getAttribute("aria-disabled")),t=null==e?void 0:e.getAttribute(w);M.setState("value",t||void 0)}function G(){var e,t,l,d;if(!r.current.search||!1===i.current.shouldFilter){r.current.filtered.count=a.current.size;return}r.current.filtered.groups=new Set;let o=0;for(let s of a.current){let a=z(null!=(t=null==(e=n.current.get(s))?void 0:e.value)?t:"",null!=(d=null==(l=n.current.get(s))?void 0:l.keywords)?d:[]);r.current.filtered.items.set(s,a),a>0&&o++}for(let[e,t]of s.current)for(let a of t)if(r.current.filtered.items.get(a)>0){r.current.filtered.groups.add(e);break}r.current.filtered.count=o}function J(){var e,t,r;let a=K();a&&((null==(e=a.parentElement)?void 0:e.firstChild)===a&&(null==(r=null==(t=a.closest(v))?void 0:t.querySelector('[cmdk-group-heading=""]'))||r.scrollIntoView({block:"nearest"})),a.scrollIntoView({block:"nearest"}))}function K(){var e;return null==(e=E.current)?void 0:e.querySelector(`${j}[aria-selected="true"]`)}function H(){var e;return Array.from((null==(e=E.current)?void 0:e.querySelectorAll(y))||[])}function T(e){let t=H()[e];t&&M.setState("value",t.getAttribute(w))}function Z(e){var t;let r=K(),a=H(),s=a.findIndex(e=>e===r),n=a[s+e];null!=(t=i.current)&&t.loop&&(n=s+e<0?a[a.length-1]:s+e===a.length?a[0]:a[s+e]),n&&M.setState("value",n.getAttribute(w))}function X(e){let t=K(),r=null==t?void 0:t.closest(v),a;for(;r&&!a;)a=null==(r=e>0?function(e,t){let r=e.nextElementSibling;for(;r;){if(r.matches(t))return r;r=r.nextElementSibling}}(r,v):function(e,t){let r=e.previousElementSibling;for(;r;){if(r.matches(t))return r;r=r.previousElementSibling}}(r,v))?void 0:r.querySelector(y);a?M.setState("value",a.getAttribute(w)):Z(e)}let Q=()=>T(H().length-1),ee=e=>{e.preventDefault(),e.metaKey?Q():e.altKey?X(1):Z(1)},et=e=>{e.preventDefault(),e.metaKey?T(0):e.altKey?X(-1):Z(-1)};return d.createElement(h.sG.div,{ref:t,tabIndex:-1,...C,"cmdk-root":"",onKeyDown:e=>{var t;null==(t=C.onKeyDown)||t.call(C,e);let r=e.nativeEvent.isComposing||229===e.keyCode;if(!(e.defaultPrevented||r))switch(e.key){case"n":case"j":S&&e.ctrlKey&&ee(e);break;case"ArrowDown":ee(e);break;case"p":case"k":S&&e.ctrlKey&&et(e);break;case"ArrowUp":et(e);break;case"Home":e.preventDefault(),T(0);break;case"End":e.preventDefault(),Q();break;case"Enter":{e.preventDefault();let t=K();if(t){let e=new Event(N);t.dispatchEvent(e)}}}}},d.createElement("label",{"cmdk-label":"",htmlFor:Y.inputId,id:Y.labelId,style:V},o),O(e,e=>d.createElement(D.Provider,{value:M},d.createElement(R.Provider,{value:Y},e))))}),I=d.forwardRef((e,t)=>{var r,a;let s=(0,x.B)(),n=d.useRef(null),l=d.useContext(C),i=k(),o=U(e),c=null!=(a=null==(r=o.current)?void 0:r.forceMount)?a:null==l?void 0:l.forceMount;$(()=>{if(!c)return i.item(s,null==l?void 0:l.id)},[c]);let u=B(s,n,[e.value,e.children,n],e.keywords),p=S(),m=q(e=>e.value&&e.value===u.current),f=q(e=>!!c||!1===i.filter()||!e.search||e.filtered.items.get(s)>0);function v(){var e,t;g(),null==(t=(e=o.current).onSelect)||t.call(e,u.current)}function g(){p.setState("value",u.current,!0)}if(d.useEffect(()=>{let t=n.current;if(!(!t||e.disabled))return t.addEventListener(N,v),()=>t.removeEventListener(N,v)},[f,e.onSelect,e.disabled]),!f)return null;let{disabled:j,value:y,onSelect:w,forceMount:_,keywords:R,...D}=e;return d.createElement(h.sG.div,{ref:(0,b.t)(n,t),...D,id:s,"cmdk-item":"",role:"option","aria-disabled":!!j,"aria-selected":!!m,"data-disabled":!!j,"data-selected":!!m,onPointerMove:j||i.getDisablePointerSelection()?void 0:g,onClick:j?void 0:v},e.children)}),L=d.forwardRef((e,t)=>{let{heading:r,children:a,forceMount:s,...n}=e,l=(0,x.B)(),i=d.useRef(null),o=d.useRef(null),c=(0,x.B)(),u=k(),p=q(e=>!!s||!1===u.filter()||!e.search||e.filtered.groups.has(l));$(()=>u.group(l),[]),B(l,i,[e.value,e.heading,o]);let m=d.useMemo(()=>({id:l,forceMount:s}),[s]);return d.createElement(h.sG.div,{ref:(0,b.t)(i,t),...n,"cmdk-group":"",role:"presentation",hidden:!p||void 0},r&&d.createElement("div",{ref:o,"cmdk-group-heading":"","aria-hidden":!0,id:c},r),O(e,e=>d.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":r?c:void 0},d.createElement(C.Provider,{value:m},e))))}),E=d.forwardRef((e,t)=>{let{alwaysRender:r,...a}=e,s=d.useRef(null),n=q(e=>!e.search);return r||n?d.createElement(h.sG.div,{ref:(0,b.t)(s,t),...a,"cmdk-separator":"",role:"separator"}):null}),P=d.forwardRef((e,t)=>{let{onValueChange:r,...a}=e,s=null!=e.value,n=S(),l=q(e=>e.search),i=q(e=>e.selectedItemId),o=k();return d.useEffect(()=>{null!=e.value&&n.setState("search",e.value)},[e.value]),d.createElement(h.sG.input,{ref:t,...a,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":o.listId,"aria-labelledby":o.labelId,"aria-activedescendant":i,id:o.inputId,type:"text",value:s?e.value:l,onChange:e=>{s||n.setState("search",e.target.value),null==r||r(e.target.value)}})}),M=d.forwardRef((e,t)=>{let{children:r,label:a="Suggestions",...s}=e,n=d.useRef(null),l=d.useRef(null),i=q(e=>e.selectedItemId),o=k();return d.useEffect(()=>{if(l.current&&n.current){let e=l.current,t=n.current,r,a=new ResizeObserver(()=>{r=requestAnimationFrame(()=>{let r=e.offsetHeight;t.style.setProperty("--cmdk-list-height",r.toFixed(1)+"px")})});return a.observe(e),()=>{cancelAnimationFrame(r),a.unobserve(e)}}},[]),d.createElement(h.sG.div,{ref:(0,b.t)(n,t),...s,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":i,"aria-label":a,id:o.listId},O(e,e=>d.createElement("div",{ref:(0,b.t)(l,o.listInnerRef),"cmdk-list-sizer":""},e)))}),Y=d.forwardRef((e,t)=>{let{open:r,onOpenChange:a,overlayClassName:s,contentClassName:n,container:l,...i}=e;return d.createElement(f.bL,{open:r,onOpenChange:a},d.createElement(f.ZL,{container:l},d.createElement(f.hJ,{"cmdk-overlay":"",className:s}),d.createElement(f.UC,{"aria-label":e.label,"cmdk-dialog":"",className:n},d.createElement(A,{ref:t,...i}))))}),z=Object.assign(A,{List:M,Item:I,Input:P,Group:L,Separator:E,Dialog:Y,Empty:d.forwardRef((e,t)=>q(e=>0===e.filtered.count)?d.createElement(h.sG.div,{ref:t,...e,"cmdk-empty":"",role:"presentation"}):null),Loading:d.forwardRef((e,t)=>{let{progress:r,children:a,label:s="Loading...",...n}=e;return d.createElement(h.sG.div,{ref:t,...n,"cmdk-loading":"",role:"progressbar","aria-valuenow":r,"aria-valuemin":0,"aria-valuemax":100,"aria-label":s},O(e,e=>d.createElement("div",{"aria-hidden":!0},e)))})});function U(e){let t=d.useRef(e);return $(()=>{t.current=e}),t}var $=d.useEffect;function F(e){let t=d.useRef();return void 0===t.current&&(t.current=e()),t}function q(e){let t=S(),r=()=>e(t.snapshot());return d.useSyncExternalStore(t.subscribe,r,r)}function B(e,t,r,a=[]){let s=d.useRef(),n=k();return $(()=>{var l;let i=(()=>{var e;for(let t of r){if("string"==typeof t)return t.trim();if("object"==typeof t&&"current"in t)return t.current?null==(e=t.current.textContent)?void 0:e.trim():s.current}})(),d=a.map(e=>e.trim());n.value(e,i,d),null==(l=t.current)||l.setAttribute(w,i),s.current=i}),s}var W=()=>{let[e,t]=d.useState(),r=F(()=>new Map);return $(()=>{r.current.forEach(e=>e()),r.current=new Map},[e]),(e,a)=>{r.current.set(e,a),t({})}};function O({asChild:e,children:t},r){let a;return e&&d.isValidElement(t)?d.cloneElement("function"==typeof(a=t.type)?a(t.props):"render"in a?a.render(t.props):t,{ref:t.ref},r(t.props.children)):r(t)}var V={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"},G=r(16873),J=r(59462);r(71965);let K=d.forwardRef(({className:e,...t},r)=>(0,a.jsx)(z,{ref:r,className:(0,J.cn)("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...t}));K.displayName=z.displayName;let H=d.forwardRef(({className:e,...t},r)=>(0,a.jsxs)("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[(0,a.jsx)(G.A,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),(0,a.jsx)(z.Input,{ref:r,className:(0,J.cn)("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...t})]}));H.displayName=z.Input.displayName;let T=d.forwardRef(({className:e,...t},r)=>(0,a.jsx)(z.List,{ref:r,className:(0,J.cn)("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...t}));T.displayName=z.List.displayName;let Z=d.forwardRef((e,t)=>(0,a.jsx)(z.Empty,{ref:t,className:"py-6 text-center text-sm",...e}));Z.displayName=z.Empty.displayName;let X=d.forwardRef(({className:e,...t},r)=>(0,a.jsx)(z.Group,{ref:r,className:(0,J.cn)("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...t}));X.displayName=z.Group.displayName,d.forwardRef(({className:e,...t},r)=>(0,a.jsx)(z.Separator,{ref:r,className:(0,J.cn)("-mx-1 h-px bg-border",e),...t})).displayName=z.Separator.displayName;let Q=d.forwardRef(({className:e,...t},r)=>(0,a.jsx)(z.Item,{ref:r,className:(0,J.cn)("relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e),...t}));Q.displayName=z.Item.displayName;var ee=r(61366),et=r(25409),er=r(58334),ea=r(48859),es=r(26248);es.callServer,es.findSourceMapURL,es.callServer,es.findSourceMapURL;let en=(0,es.createServerReference)("4083136e1cf0e91fa0e8a6f6e237eeaa29b983d79f",es.callServer,void 0,es.findSourceMapURL,"PatientCheckup"),el=(0,es.createServerReference)("402fc36c25bb3e8fd88e14cea730d3c759512127d3",es.callServer,void 0,es.findSourceMapURL,"UpdatePatientCheckup");var ei=r(47087),ed=r(81914),eo=r(41680);let ec=(0,eo.A)("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]),eu=(0,eo.A)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);var ep=r(21711),em=r(28531),ef=r.n(em),eh=r(79334),ex=r(6868),eb=r(22403),ev=r(66315);function eg(){let e;let[t,r]=(0,d.useState)(),[o,c]=(0,d.useTransition)(),{id:u}=(0,eh.useParams)(),p=!1;u&&(e=u[0],("true"==u[1]||"false"==u[1])&&(p="true"==u[1]));let m=ev.Ik({patient:ev.Yj().uuid({message:"Patient must be selected"}),sphLD:ev.Yj().optional(),cylLD:ev.Yj().optional(),axisLD:ev.Yj().optional(),vaLD:ev.Yj().optional(),sphLN:ev.Yj().optional(),cylLN:ev.Yj().optional(),axisLN:ev.Yj().optional(),vaLN:ev.Yj().optional(),sphRD:ev.Yj().optional(),cylRD:ev.Yj().optional(),axisRD:ev.Yj().optional(),vaRD:ev.Yj().optional(),sphRN:ev.Yj().optional(),cylRN:ev.Yj().optional(),axisRN:ev.Yj().optional(),vaRN:ev.Yj().optional(),sideNote:ev.Yj().optional(),addNoteL:ev.Yj().optional(),addNote:ev.Yj().optional()}),f=(0,ex.mN)({resolver:(0,ed.u)(m),mode:"onBlur",defaultValues:{patient:"",sideNote:"",sphLD:"",sphLN:"",sphRD:"",sphRN:"",cylLD:"",cylLN:"",cylRD:"",cylRN:"",axisLD:"",axisLN:"",axisRD:"",axisRN:"",vaLD:"",vaLN:"",vaRD:"",vaRN:"",addNote:"",addNoteL:""}}),h=(0,d.useRef)(null),[x,b]=(0,d.useState)(null),[v,g]=(0,d.useState)(),[j,y]=(0,d.useState)(null);return(0,d.useRef)(!1),(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("section",{children:[(0,a.jsx)(l.A,{title:`${p?"Update ":""}Patient Check Up`}),(0,a.jsxs)("div",{className:"flex items-center justify-center w-full mt-8 ",children:[(0,a.jsx)(ex.Op,{...f,children:(0,a.jsxs)("form",{onSubmit:f.handleSubmit(function(t){c(async()=>{let r=await (0,ei.O)();if(p){let a=await el(Object.assign(t,{checkupId:u?.[2]||"",created_user_id:r.data?.id||"",updated_user_id:r.data?.id||""}));a.status?(eb.Ay.success(a.message),(0,eh.redirect)(`/patient/profile/${e}`)):(console.log(a),eb.Ay.error(a.message))}else{let e=await en(Object.assign(t,{created_user_id:r.data?.id||"",updated_user_id:r.data?.id||""}));console.log(e),e.status?(eb.Ay.success(e.message),b({patient_name:e.data.patient_checkups.patient_name,patient_checkup:[e.data]}),f.reset({patient:t.patient})):(console.log(e),eb.Ay.error(e.message))}})}),className:"bg-customSecondary-20 rounded-md shadow p-8 w-full space-y-4",children:[(0,a.jsx)(ee.zB,{control:f.control,name:"patient",render:({field:e})=>(0,a.jsxs)(ee.eI,{className:"flex items-center",children:[(0,a.jsxs)(ee.lR,{className:"basis-[30%]",children:["Patient",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsxs)("div",{className:"basis-[70%] flex gap-x-1",children:[(0,a.jsxs)(er.AM,{children:[(0,a.jsx)(er.Wv,{asChild:!0,children:(0,a.jsx)(ee.MJ,{children:(0,a.jsxs)(i.$,{ref:h,variant:"outline",role:"combobox",className:`
                                w-full justify-between capitalize
                                ${!e.value&&"text-muted-foreground"}
                              `,children:[e.value?t?.find(t=>t.id===e.value)?.patient_name+", Phone No. "+t?.find(t=>t.id===e.value)?.phone_no:"Select Patient",(0,a.jsx)(ec,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})})}),(0,a.jsx)(er.hl,{style:{width:`${j}px`},className:" p-0",children:(0,a.jsxs)(K,{children:[(0,a.jsx)(H,{placeholder:"Search Patient..."}),(0,a.jsxs)(T,{children:[(0,a.jsxs)(Z,{children:["No Patient found."," ",(0,a.jsx)("span",{className:"text-customPrimary underline",children:(0,a.jsx)(ef(),{href:"/create-patient",children:"Create Patient"})})]}),(0,a.jsx)(X,{children:t?.map(t=>a.jsxs(Q,{className:"capitalize",value:t.patient_name,onSelect:()=>{f.setValue("patient",t.id,{shouldValidate:!0})},children:[t.patient_name,a.jsx(eu,{className:`
                                        ml-auto
                                        ${t.id===e.value?"opacity-100":"opacity-0"}
                                      `})]},t.id))})]})]})})]}),(0,a.jsx)(ee.Rr,{}),(0,a.jsx)(ee.C5,{}),e.value&&(0,a.jsx)("button",{children:(0,a.jsx)(ef(),{href:`/patient/profile/${t?.find(t=>t.id===e.value)?.id}`,children:(0,a.jsx)(ep.A,{size:28,className:"stroke-tertiary"})})})]})]})}),(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)(ee.lR,{className:"basis-[30%]",children:"EYE"}),(0,a.jsx)("div",{className:"basis-[70%]",children:(0,a.jsxs)("div",{className:"flex gap-x-4",children:[(0,a.jsxs)("table",{className:"flex-1",children:[(0,a.jsxs)("thead",{children:[(0,a.jsx)("tr",{children:(0,a.jsx)("td",{className:"border-2 border-tertiary font-bold text-center",colSpan:5,children:"OD"})}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"border-2 border-tertiary"}),(0,a.jsx)("td",{className:"border-2 border-tertiary text-center ",children:"SPH"}),(0,a.jsx)("td",{className:"border-2 border-tertiary text-center ",children:"CYL"}),(0,a.jsx)("td",{className:"border-2 border-tertiary text-center ",children:"AXIS"}),(0,a.jsx)("td",{className:"border-2 border-tertiary text-center ",children:"VA"})]})]}),(0,a.jsxs)("tbody",{children:[(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"border-2 border-tertiary  text-center w-20",children:"DIST."}),(0,a.jsx)("td",{className:"border-2 border-tertiary w-20",children:(0,a.jsx)(ee.zB,{control:f.control,name:"sphRD",render:({field:e})=>(0,a.jsxs)(ee.eI,{children:[(0,a.jsx)(ee.MJ,{className:"",children:(0,a.jsx)(et.p,{className:"placeholder:text-center",placeholder:"--",...e,type:"text"})}),(0,a.jsx)(ee.Rr,{}),(0,a.jsx)(ee.C5,{})]})})}),(0,a.jsx)("td",{className:"border-2 border-tertiary w-20",children:(0,a.jsx)(ee.zB,{control:f.control,name:"cylRD",render:({field:e})=>(0,a.jsxs)(ee.eI,{children:[(0,a.jsx)(ee.MJ,{className:"",children:(0,a.jsx)(et.p,{className:"placeholder:text-center",placeholder:"--",...e,type:"text"})}),(0,a.jsx)(ee.Rr,{}),(0,a.jsx)(ee.C5,{})]})})}),(0,a.jsx)("td",{className:"border-2 border-tertiary w-20",children:(0,a.jsx)(ee.zB,{control:f.control,name:"axisRD",render:({field:e})=>(0,a.jsxs)(ee.eI,{children:[(0,a.jsx)(ee.MJ,{className:"",children:(0,a.jsx)(et.p,{className:"placeholder:text-center",placeholder:"--",...e,type:"text"})}),(0,a.jsx)(ee.Rr,{}),(0,a.jsx)(ee.C5,{})]})})}),(0,a.jsx)("td",{className:"border-2 border-tertiary w-20",children:(0,a.jsx)(ee.zB,{control:f.control,name:"vaRD",render:({field:e})=>(0,a.jsxs)(ee.eI,{children:[(0,a.jsx)(ee.MJ,{className:"",children:(0,a.jsx)(et.p,{className:"placeholder:text-center",placeholder:"--",...e,type:"text"})}),(0,a.jsx)(ee.Rr,{}),(0,a.jsx)(ee.C5,{})]})})})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"border-2 border-tertiary w-20 text-center ",children:"ADD."}),(0,a.jsx)("td",{className:"border-2 border-tertiary w-20",colSpan:5,children:(0,a.jsx)(ee.zB,{control:f.control,name:"addNote",render:({field:e})=>(0,a.jsxs)(ee.eI,{children:[(0,a.jsx)(ee.MJ,{className:"",children:(0,a.jsx)(et.p,{className:"placeholder:text-center",placeholder:"--",...e,type:"text"})}),(0,a.jsx)(ee.Rr,{}),(0,a.jsx)(ee.C5,{})]})})})]})]})]}),(0,a.jsxs)("table",{className:"flex-1",children:[(0,a.jsxs)("thead",{children:[(0,a.jsx)("tr",{children:(0,a.jsx)("td",{className:"border-2 border-tertiary font-bold text-center",colSpan:5,children:"OS"})}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"border-2 border-tertiary"}),(0,a.jsx)("td",{className:"border-2 border-tertiary text-center ",children:"SPH"}),(0,a.jsx)("td",{className:"border-2 border-tertiary text-center ",children:"CYL"}),(0,a.jsx)("td",{className:"border-2 border-tertiary text-center ",children:"AXIS"}),(0,a.jsx)("td",{className:"border-2 border-tertiary text-center ",children:"VA"})]})]}),(0,a.jsxs)("tbody",{children:[(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"border-2 border-tertiary  text-center w-20",children:"DIST."}),(0,a.jsx)("td",{className:"border-2 border-tertiary w-20",children:(0,a.jsx)(ee.zB,{control:f.control,name:"sphLD",render:({field:e})=>(0,a.jsxs)(ee.eI,{children:[(0,a.jsx)(ee.MJ,{className:"",children:(0,a.jsx)(et.p,{className:"placeholder:text-center",placeholder:"--",...e,type:"text"})}),(0,a.jsx)(ee.Rr,{}),(0,a.jsx)(ee.C5,{})]})})}),(0,a.jsx)("td",{className:"border-2 border-tertiary w-20",children:(0,a.jsx)(ee.zB,{control:f.control,name:"cylLD",render:({field:e})=>(0,a.jsxs)(ee.eI,{children:[(0,a.jsx)(ee.MJ,{className:"",children:(0,a.jsx)(et.p,{className:"placeholder:text-center",placeholder:"--",...e,type:"text"})}),(0,a.jsx)(ee.Rr,{}),(0,a.jsx)(ee.C5,{})]})})}),(0,a.jsx)("td",{className:"border-2 border-tertiary w-20",children:(0,a.jsx)(ee.zB,{control:f.control,name:"axisLD",render:({field:e})=>(0,a.jsxs)(ee.eI,{children:[(0,a.jsx)(ee.MJ,{className:"",children:(0,a.jsx)(et.p,{className:"placeholder:text-center",placeholder:"--",...e,type:"text"})}),(0,a.jsx)(ee.Rr,{}),(0,a.jsx)(ee.C5,{})]})})}),(0,a.jsx)("td",{className:"border-2 border-tertiary w-20",children:(0,a.jsx)(ee.zB,{control:f.control,name:"vaLD",render:({field:e})=>(0,a.jsxs)(ee.eI,{children:[(0,a.jsx)(ee.MJ,{className:"",children:(0,a.jsx)(et.p,{className:"placeholder:text-center",placeholder:"--",...e,type:"text"})}),(0,a.jsx)(ee.Rr,{}),(0,a.jsx)(ee.C5,{})]})})})]}),(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"border-2 border-tertiary w-20 text-center ",children:"ADD."}),(0,a.jsx)("td",{className:"border-2 border-tertiary w-20",colSpan:5,children:(0,a.jsx)(ee.zB,{control:f.control,name:"addNoteL",render:({field:e})=>(0,a.jsxs)(ee.eI,{children:[(0,a.jsx)(ee.MJ,{className:"",children:(0,a.jsx)(et.p,{className:"placeholder:text-center",placeholder:"--",...e,type:"text"})}),(0,a.jsx)(ee.Rr,{}),(0,a.jsx)(ee.C5,{})]})})})]})]})]})]})})]}),(0,a.jsx)(ee.zB,{control:f.control,name:"sideNote",render:({field:e})=>(0,a.jsxs)(ee.eI,{className:"flex items-center",children:[(0,a.jsx)(ee.lR,{className:"basis-[30%]",children:"Remarks"}),(0,a.jsxs)("div",{className:"basis-[70%]",children:[(0,a.jsx)(ee.MJ,{children:(0,a.jsx)(ea.T,{placeholder:"Write any remarks (Optional)",...e})}),(0,a.jsx)(ee.Rr,{}),(0,a.jsx)(ee.C5,{})]})]})}),(0,a.jsxs)("div",{className:"w-full flex gap-x-4 justify-end ",children:[(0,a.jsx)(i.$,{className:"bg-red-500 text-white hover:bg-red-600 hover:text-white px-12",type:"button",onClick:()=>{f.reset({patient:e})},children:"Reset"}),(0,a.jsxs)(i.$,{className:"bg-customPrimary hover:bg-customPrimary-80 disabled:bg-customPrimary-20 px-12",type:"submit",disabled:!f.formState.isValid,children:[!0==p?"Update":"Add",o&&(0,a.jsx)(s.A,{})]})]})]})}),x&&(0,a.jsx)(n.A,{patientData:x,showIcon:!1,printCallByParent:e=>g(()=>e)})]})]})})}},71965:(e,t,r)=>{"use strict";r.d(t,{Cf:()=>m,Es:()=>h,HM:()=>u,L3:()=>x,c7:()=>f,lG:()=>d,zM:()=>o});var a=r(45512),s=r(58009),n=r(27553),l=r(44269),i=r(59462);let d=n.bL,o=n.l9,c=n.ZL,u=n.bm,p=s.forwardRef(({className:e,...t},r)=>(0,a.jsx)(n.hJ,{ref:r,className:(0,i.cn)("fixed inset-0 z-50 bg-black/25  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...t}));p.displayName=n.hJ.displayName;let m=s.forwardRef(({className:e,children:t,...r},s)=>(0,a.jsxs)(c,{children:[(0,a.jsx)(p,{}),(0,a.jsxs)(n.UC,{ref:s,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...r,children:[t,(0,a.jsxs)(n.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(l.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]}));m.displayName=n.UC.displayName;let f=({className:e,...t})=>(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",e),...t});f.displayName="DialogHeader";let h=({className:e,...t})=>(0,a.jsx)("div",{className:(0,i.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",e),...t});h.displayName="DialogFooter";let x=s.forwardRef(({className:e,...t},r)=>(0,a.jsx)(n.hE,{ref:r,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",e),...t}));x.displayName=n.hE.displayName,s.forwardRef(({className:e,...t},r)=>(0,a.jsx)(n.VY,{ref:r,className:(0,i.cn)("text-sm text-muted-foreground",e),...t})).displayName=n.VY.displayName},61366:(e,t,r)=>{"use strict";r.d(t,{lV:()=>u,MJ:()=>v,Rr:()=>g,zB:()=>m,eI:()=>x,lR:()=>b,C5:()=>j});var a=r(45512),s=r(58009),n=r(12705),l=r(6868),i=r(59462),d=r(92405);let o=(0,r(21643).F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=s.forwardRef(({className:e,...t},r)=>(0,a.jsx)(d.b,{ref:r,className:(0,i.cn)(o(),e),...t}));c.displayName=d.b.displayName;let u=l.Op,p=s.createContext({}),m=({...e})=>(0,a.jsx)(p.Provider,{value:{name:e.name},children:(0,a.jsx)(l.xI,{...e})}),f=()=>{let e=s.useContext(p),t=s.useContext(h),{getFieldState:r,formState:a}=(0,l.xW)(),n=r(e.name,a);if(!e)throw Error("useFormField should be used within <FormField>");let{id:i}=t;return{id:i,name:e.name,formItemId:`${i}-form-item`,formDescriptionId:`${i}-form-item-description`,formMessageId:`${i}-form-item-message`,...n}},h=s.createContext({}),x=s.forwardRef(({className:e,...t},r)=>{let n=s.useId();return(0,a.jsx)(h.Provider,{value:{id:n},children:(0,a.jsx)("div",{ref:r,className:(0,i.cn)("space-y-2",e),...t})})});x.displayName="FormItem";let b=s.forwardRef(({className:e,...t},r)=>{let{error:s,formItemId:n}=f();return(0,a.jsx)(c,{ref:r,className:(0,i.cn)(s&&"text-destructive",e),htmlFor:n,...t})});b.displayName="FormLabel";let v=s.forwardRef(({...e},t)=>{let{error:r,formItemId:s,formDescriptionId:l,formMessageId:i}=f();return(0,a.jsx)(n.DX,{ref:t,id:s,"aria-describedby":r?`${l} ${i}`:`${l}`,"aria-invalid":!!r,...e})});v.displayName="FormControl";let g=s.forwardRef(({className:e,...t},r)=>{let{formDescriptionId:s}=f();return(0,a.jsx)("p",{ref:r,id:s,className:(0,i.cn)("text-sm text-muted-foreground",e),...t})});g.displayName="FormDescription";let j=s.forwardRef(({className:e,children:t,...r},s)=>{let{error:n,formMessageId:l}=f(),d=n?String(n?.message):t;return d?(0,a.jsx)("p",{ref:s,id:l,className:(0,i.cn)("text-sm font-medium text-destructive",e),...r,children:d}):null});j.displayName="FormMessage"},58334:(e,t,r)=>{"use strict";r.d(t,{AM:()=>i,Wv:()=>d,hl:()=>o});var a=r(45512),s=r(58009),n=r(13490),l=r(59462);let i=n.bL,d=n.l9,o=s.forwardRef(({className:e,align:t="center",sideOffset:r=4,...s},i)=>(0,a.jsx)(n.ZL,{children:(0,a.jsx)(n.UC,{ref:i,align:t,sideOffset:r,className:(0,l.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...s})}));o.displayName=n.UC.displayName},48859:(e,t,r)=>{"use strict";r.d(t,{T:()=>l});var a=r(45512),s=r(58009),n=r(59462);let l=s.forwardRef(({className:e,...t},r)=>(0,a.jsx)("textarea",{className:(0,n.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:border-tertiary disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:r,...t}));l.displayName="Textarea"},21711:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(41680).A)("FileUser",[["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M15 18a3 3 0 1 0-6 0",key:"16awa0"}],["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7z",key:"1mlx9k"}],["circle",{cx:"12",cy:"13",r:"2",key:"1c1ljs"}]])},16873:(e,t,r)=>{"use strict";r.d(t,{A:()=>a});let a=(0,r(41680).A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]])},43208:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});let a=(0,r(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/muhamnadwaris/Desktop/projects/clinic-ms/app/patient/patient-checkup/[[...id]]/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/muhamnadwaris/Desktop/projects/clinic-ms/app/patient/patient-checkup/[[...id]]/page.tsx","default")},99935:(e,t,r)=>{"use strict";r.d(t,{Lp:()=>c,Mi:()=>h,Ob:()=>m,Rw:()=>o,Zj:()=>f,_H:()=>u,fZ:()=>p});var a=r(21590);r(70376);var s=r(7351),n=r(64998),l=r(89121),i=r(99344);let d=s.Ik({patientName:s.Yj().min(1,{message:"Patient Name is Required"}),fatherName:s.Yj(),age:s.KC([s.Yj().min(1,{message:"Age is Required"}),s.ai().int().nonnegative({message:"Age must be a positive number"})]).transform((e,t)=>{if("string"==typeof e){if(!Number.isNaN(parseInt(e)))return parseInt(e);t.addIssue({code:n.eq.custom,message:"Not a valid number"})}return e}),cnic:s.Yj().max(13,{message:"Max 13 digits"}),phone:s.Yj().min(11,{message:"Max 11 digits"}).max(15,{message:"Max 15 digits"}).superRefine((e,t)=>{""!=e&&Number.isNaN(parseInt(e))&&t.addIssue({code:n.eq.custom,message:"Not a Number"})}),sideNote:s.Yj(),createdBy:s.Yj().optional(),updatedBy:s.Yj().optional()}).partial({fatherName:!0,cnic:!0,sideNote:!0});async function o({patientName:e,fatherName:t,age:r,phone:a,cnic:s,sideNote:n,createdBy:i="",updatedBy:o=""}){let c=d.safeParse({patientName:e,fatherName:t,age:r,phone:a,cnic:s,sideNote:n});if(!c.success)return{message:"Validation failed",error:c.error.format()};try{return await l.z.$transaction(async l=>{let d=await l.patient.create({data:{patient_name:e,father_name:t,age:Number(r),phone_no:a,cnic:s,notes:n,created_user_id:i,updated_user_id:o},select:{id:!0,updated_at:!0,updated_by:!0}});return{message:"Patient Data Created Successfully",data:d,status:!0}})}catch(e){return{message:"Something Went Wrong",error:e,status:!1}}}async function c({id:e,patientName:t,fatherName:r,age:a,phone:s,cnic:n,sideNote:i,createdBy:o="",updatedBy:c=""}){let u=d.safeParse({patientName:t,fatherName:r,age:a,phone:s,cnic:n,sideNote:i});if(!u.success)return{message:"Validation failed",error:u.error.format()};try{let d=await l.z.patient.update({data:{patient_name:t,father_name:r,age:Number(a),phone_no:s,cnic:n,notes:i,created_user_id:o,updated_user_id:c},select:{id:!0,updated_at:!0,updated_by:!0},where:{id:e}});return{message:"Patient Data Updated Successfully",data:d,status:!0}}catch(e){return{message:"Something Went Wrong",error:e,status:!1}}}async function u(e,t,r){try{let a=await l.z.patient.findMany({omit:{created_at:!0,created_user_id:!0,updated_at:!0,updated_user_id:!0},skip:e,take:t,where:""!=r?{OR:[{patient_name:{contains:r}},{father_name:{contains:r}},{cnic:{contains:r}},{phone_no:{contains:r}},{notes:{contains:r}}]}:void 0}),s=await l.z.patient.count();return{message:"Fetch Patient Data successfully",data:a,status:!0,totalItems:s}}catch(e){return{message:"Something Went Wrong",error:e,status:!1}}}async function p(){try{let e=await l.z.patient.findMany({omit:{created_at:!0,created_user_id:!0,updated_at:!0,updated_user_id:!0}});return{message:"Fetch Patient Data successfully",data:e,status:!0}}catch(e){return{message:"Something Went Wrong",error:e,status:!1}}}async function m(e){try{let t=await l.z.patient.findUnique({omit:{created_at:!0,created_user_id:!0,updated_at:!0,updated_user_id:!0},where:{id:e},include:{patient_checkup:{include:{created_by:{select:{fname:!0,lname:!0}}},orderBy:{created_at:"desc"}}}});return{message:"Fetch Patient Data successfully",data:t,status:!0}}catch(e){return{message:"Something Went Wrong",error:e,status:!1}}}async function f(e){try{let t=await l.z.patient.delete({where:{id:e},select:{id:!0,updated_at:!0,updated_by:!0}});return{message:"Patient Data Deleted successfully",data:t,status:!0}}catch(e){return{message:"Something Went Wrong",error:e,status:!1}}}async function h(){try{let e=await l.z.patient.count();return{message:"Fetch Patient Count",data:e,status:!0}}catch(e){return{message:"Something went wrong",error:e,status:!1}}}d.merge(s.Ik({id:s.Yj().uuid()})),(0,i.D)([o,c,u,p,m,f,h]),(0,a.A)(o,"405d35bc8bcfe2081206c4db459097298fe323f5a4",null),(0,a.A)(c,"4075a697b8d174c57378138784911344171f244c1d",null),(0,a.A)(u,"7021018dfb49a4bd18304bfa82c430eb7f25d67ca8",null),(0,a.A)(p,"000c0522219a527598e3eeebfe0e256b75c62968fb",null),(0,a.A)(m,"40e9545a480c5f1f0c9049e8cd09e27e297d400a79",null),(0,a.A)(f,"408377f98a9bd176429242396b35519fe8a25a7edf",null),(0,a.A)(h,"00d7d9908c28d47eeb318c7655099bb79332cbf5de",null)},66445:(e,t,r)=>{"use strict";r.d(t,{LM:()=>u,Sh:()=>p,c$:()=>f,y1:()=>m});var a=r(21590);r(70376);var s=r(89121),n=r(44867),l=r(82190),i=r(7351),d=r(99344);let o=i.Ik({patient:i.Yj().uuid({message:"Patient must be selected"}),sphLD:i.Yj().optional(),cylLD:i.Yj().optional(),axisLD:i.Yj().optional(),vaLD:i.Yj().optional(),sphLN:i.Yj().optional(),cylLN:i.Yj().optional(),axisLN:i.Yj().optional(),vaLN:i.Yj().optional(),sphRD:i.Yj().optional(),cylRD:i.Yj().optional(),axisRD:i.Yj().optional(),vaRD:i.Yj().optional(),sphRN:i.Yj().optional(),cylRN:i.Yj().optional(),axisRN:i.Yj().optional(),vaRN:i.Yj().optional(),sideNote:i.Yj().optional(),addNote:i.Yj().optional(),addNoteL:i.Yj().optional().refine(e=>void 0===e||""===e.trim()||/^[-+]?\d+(\.\d+)?$/.test(e),{message:"Invalid decimal number"}),created_user_id:i.Yj(),updated_user_id:i.Yj()});function c(e){if(void 0!==e&&""!==e.trim())return e}async function u(e){let t=o.safeParse(e);if(!t.success)return{message:"Validation failed",error:t.error.format(),status:!1};try{return await s.z.$transaction(async t=>{let r=new Date,a=await t.patientAppointment.findFirst({where:{AND:[{patient_id:e.patient},{appointment_date_time:{gte:(0,n.o)(r),lt:(0,l.D)(r)}}]},select:{id:!0}});a&&await t.patientAppointment.update({data:{appointment_status:"Fulfilled"},where:{id:a.id}});let s=await t.patientCheckUp.create({data:{patient_id:e.patient,remarks:e.sideNote,axisld:c(e.axisLD),axisrd:c(e.axisRD),cylld:c(e.cylLD),cylrd:c(e.cylRD),sphld:c(e.sphLD),sphrd:c(e.sphRD),vald:c(e.vaLD),vard:c(e.vaRD),add_note:c(e.addNote),add_noteL:c(e.addNoteL),created_user_id:e.created_user_id,updated_user_id:e.updated_user_id},include:{created_by:{select:{fname:!0,lname:!0}},patient_checkups:{select:{patient_name:!0}}}});return{message:"Created Patient Checkup successfully",data:s,status:!0}})}catch(e){return{message:"Something Went Wrong",error:e,status:!1}}}async function p(e){let t=o.safeParse(e);if(!t.success)return{message:"Validation failed",error:t.error.format(),status:!1};try{let t=await s.z.patientCheckUp.update({data:{patient_id:e.patient,remarks:e.sideNote,axisld:c(e.axisLD),axisln:c(e.axisLN),axisrd:c(e.axisRD),axisrn:c(e.axisRN),cylld:c(e.cylLD),cylln:c(e.cylLN),cylrd:c(e.cylRD),cylrn:c(e.cylRN),sphld:c(e.sphLD),sphln:c(e.sphLN),sphrd:c(e.sphRD),sphrn:c(e.sphRN),vald:c(e.vaLD),valn:c(e.vaLN),vard:c(e.vaRD),varn:c(e.vaRN),add_note:c(e.addNote),add_noteL:c(e.addNoteL),created_user_id:e.created_user_id,updated_user_id:e.updated_user_id},where:{id:e.checkupId}});return{message:"Updated Checkup Patient successfully",data:t,status:!0}}catch(e){return{message:"Something Went Wrong",error:e,status:!1}}}async function m(e){if(!e)return{message:"Id did not provided",error:"",status:!1};try{let t=await s.z.patientCheckUp.findUnique({where:{id:e}});return{message:"Fetch Patient checkup Data successfully",data:t,status:!0}}catch(e){return{message:"Something Went Wrong",error:e,status:!1}}}async function f(){try{let e=new Date,t=new Date;t.setDate(e.getDate()-7);let r=await s.z.patientCheckUp.groupBy({by:["created_at"],_count:!0,where:{created_at:{gte:(0,n.o)(t),lte:(0,l.D)(e)}},orderBy:{created_at:"asc"}}),a=new Map;r.map(e=>{let t=new Date(e.created_at).toISOString().split("T")[0];if(a.has(t)){let r=a.get(t);a.set(t,r+e._count)}else a.set(t,e._count)});let i=[];return a.forEach((e,t)=>{i.push({date:t,count:e})}),{message:"Fetch Patient checkup Count",data:i,status:!0}}catch(e){return{message:"Something Went Wrong",error:e,status:!1}}}o.merge(i.Ik({checkupId:i.Yj().uuid({message:"checkup required"})})),(0,d.D)([u,p,m,f]),(0,a.A)(u,"4083136e1cf0e91fa0e8a6f6e237eeaa29b983d79f",null),(0,a.A)(p,"402fc36c25bb3e8fd88e14cea730d3c759512127d3",null),(0,a.A)(m,"408508b8bfa090d01f4f1ef15e5b0b434bab9cd606",null),(0,a.A)(f,"0029e0a1d8292def1750a489b8854ad98ecb435a26",null)},89121:(e,t,r)=>{"use strict";r.d(t,{z:()=>n});var a=r(60030),s=r(18671);let n=globalThis.prisma||new a.PrismaClient().$extends((0,s.WU)())},47087:(e,t,r)=>{"use strict";r.d(t,{O:()=>s});var a=r(26248);let s=(0,a.createServerReference)("00281bb400ea6e7cba84e747e5ada05bc3b2b25669",a.callServer,void 0,a.findSourceMapURL,"GetUser")},46055:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s});var a=r(88077);let s=async e=>[{type:"image/x-icon",sizes:"16x16",url:(0,a.fillMetadataSegment)(".",await e.params,"favicon.ico")+""}]}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[638,156,928,77,546,265,293,202,716,821],()=>r(49539));module.exports=a})();